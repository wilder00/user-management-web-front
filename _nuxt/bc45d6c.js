(window.webpackJsonp=window.webpackJsonp||[]).push([[11,2,4],{353:function(e,t,r){var content=r(355);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("804132fa",content,!0,{sourceMap:!1})},354:function(e,t,r){"use strict";r(353)},355:function(e,t,r){var n=r(58)(!1);n.push([e.i,".loading-container[data-v-c54bb0ea]{height:100%;width:100%}",""]),e.exports=n},356:function(e,t,r){"use strict";r.r(t);r(250);var n={props:{size:{type:Number,default:5}},data:function(){return{}},computed:{sizeClass:function(){return"m-".concat(this.size)}}},o=(r(354),r(46)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"loading-container d-flex justify-content-center align-items-center"},[r("b-spinner",{class:e.sizeClass,attrs:{label:"Busy"}})],1)}),[],!1,null,"c54bb0ea",null);t.default=component.exports},358:function(e,t,r){var content=r(363);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("6e3bc492",content,!0,{sourceMap:!1})},362:function(e,t,r){"use strict";r(358)},363:function(e,t,r){var n=r(58)(!1);n.push([e.i,".spinner[data-v-3bd2db71]{left:50%;top:50%;-o-object-position:center;object-position:center;transform:translate(-50%,-50%)}",""]),e.exports=n},369:function(e,t,r){var content=r(381);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(59).default)("a83567b0",content,!0,{sourceMap:!1})},372:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(2),r(6),r(3),r(7);var n=r(24),o=r(0),c=(r(65),r(1),r(89));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={data:function(){return{}},computed:f(f(f({},Object(c.c)("users",["isUsersLoading","users"])),Object(c.c)("roles",["isRolesLoading","roles"])),{},{rolLabels:function(){return this.roles.reduce((function(e,t){return e[t.roleName]=t.label,e}),{})}}),methods:f(f({},Object(c.b)("users",["fetchUserRequests"])),{},{acceptUser:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n,o,text;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!0!==e.isBeingAccepted){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,e.isBeingAccepted=!0,t.$forceUpdate(),r.next=7,t.$axios.post("users/requests/".concat(e.id));case 7:if("OK"!==(n=r.sent).statusText){r.next=13;break}t.fetchUserRequests(),t.makeToast(n.data.message,"info","Usuario Aceptado"),r.next=14;break;case 13:throw new Error("No Se pudo obtener respuesta");case 14:r.next=20;break;case 16:r.prev=16,r.t0=r.catch(2),r.t0.response?(e.isBeingAccepted=!1,(o=r.t0.response.data.message)?(text="string"==typeof o?o:o[0],t.makeToast(text,"danger","Aceptación fallida")):t.makeToast("No está disponible el servicio.","danger","Aceptación fallida")):t.makeToast("Ocurrió un problema en la aceptación","danger","Aceptación fallida"),t.$forceUpdate();case 20:case"end":return r.stop()}}),r,null,[[2,16]])})))()},makeToast:function(e,t){var title=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.toastCount++,this.$bvToast.toast(e,{title:title,toaster:"b-toaster-bottom-left",autoHideDelay:5e3,noAutoHide:!1,appendToast:!0,variant:t,solid:r})}})},v=d,h=(r(362),r(46)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("table",{staticClass:"table table-striped"},[e._m(0),e._v(" "),r("tbody",e._l(e.users,(function(t,n){return r("tr",{key:t.id},[r("th",{attrs:{scope:"row"}},[e._v(e._s(n+1))]),e._v(" "),r("td",[e._v(e._s(t.name))]),e._v(" "),r("td",[e._v(e._s(t.lastName))]),e._v(" "),r("td",[e._v(e._s(t.email))]),e._v(" "),r("td",[e._v(e._s(e.rolLabels[t.role]))]),e._v(" "),r("td",[r("b-button",{staticClass:"position-relative",attrs:{variant:"success"},on:{click:function(r){return e.acceptUser(t)}}},[t.isBeingAccepted?r("span",{staticClass:"spinner position-absolute"},[r("b-spinner",{attrs:{small:"",variant:"",label:"Small Spinner"}})],1):e._e(),e._v(" "),r("span",{class:{invisible:t.isBeingAccepted}},[e._v("Aceptar")])]),e._v(" "),r("b-button",{staticClass:"d-none",attrs:{variant:"danger"}},[e._v("Button")])],1)])})),0)]),e._v(" "),e.users.length<=0?r("p",{staticClass:"text-center"},[e._v("\n    No hay solicitudes de usuarios\n  ")]):e._e()])}),[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{attrs:{scope:"col"}},[e._v("#")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Nombre")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Apellido")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("correo")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Rol")]),e._v(" "),r("th",{attrs:{scope:"col"}},[e._v("Actions")])])])}],!1,null,"3bd2db71",null);t.default=component.exports},380:function(e,t,r){"use strict";r(369)},381:function(e,t,r){var n=r(58)(!1);n.push([e.i,".table-container[data-v-4c7fc878]{overflow:auto}",""]),e.exports=n},387:function(e,t,r){"use strict";r.r(t);r(5),r(4),r(2),r(1),r(6),r(3),r(7);var n=r(0),o=(r(36),r(89)),c=r(372),l=r(356);function f(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var v={components:{UserRequestsTable:c.default,LoadingWindow:l.default},data:function(){return{searchQuery:"",isUserRequestLoading:!0}},computed:d(d({},Object(o.c)("users",["isUsersLoading","users"])),Object(o.c)("roles",["isRolesLoading","roles"])),methods:d(d({},Object(o.b)("users",["fetchUserRequests"])),Object(o.b)("roles",["fetchRoles"])),watch:{searchQuery:function(text,e){if(""===text&&this.fetchUserRequests(),""!==text.trim()){var t={q:text.trim()};this.fetchUserRequests({params:t})}}},created:function(){var e=this;this.isUserRequestLoading=!0,this.fetchUserRequests().then((function(){e.isUserRequestLoading=!1})),this.fetchRoles()}},h=(r(380),r(46)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isUserRequestLoading?r("LoadingWindow"):r("div",{staticClass:"container"},[r("div",[r("b-card",[r("b-form",{attrs:{inline:""}},[r("label",{staticClass:"sr-only",attrs:{for:"inline-form-input-username"}},[e._v("Username")]),e._v(" "),r("b-input-group",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{prepend:""}},[r("b-form-input",{attrs:{id:"inline-form-input-username",placeholder:"Buscar usuario"},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"table-container"},[r("UserRequestsTable")],1)])}),[],!1,null,"4c7fc878",null);t.default=component.exports}}]);